(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5a27"],{CJ5O:function(e,t,a){"use strict";var r=a("14Xm"),n=a.n(r),o=a("D3Ub"),i=a.n(o),s=a("sm2R"),c={name:"GetDictionary",props:{dictKey:String,updataDict:String},data:function(){return{dictionary:"",dictionaryOptions:[]}},watch:{dictKey:{immediate:!0,handler:function(){this.getSystem()}},updataDict:{immediate:!0,handler:function(){this.dictionary=this.updataDict}}},created:function(){this.getSystem()},mounted:function(){this.dictionary=this.updataDict},methods:{getSystem:function(){var e=this;return i()(n.a.mark(function t(){var a,r,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.a)(e.dictKey);case 2:if(a=t.sent,r=a.code,o=a.data,"200"==r){t.next=7;break}return t.abrupt("return");case 7:e.dictionaryOptions=o;case 8:case"end":return t.stop()}},t,e)}))()},selectChange:function(e){this.$emit("input",e)}}},u=(a("DWg2"),a("KHd+")),l=Object(u.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},on:{change:e.selectChange},model:{value:e.dictionary,callback:function(t){e.dictionary=t},expression:"dictionary"}},e._l(e.dictionaryOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})}),1)},[],!1,null,"1fbe2153",null);l.options.__file="index.vue";t.a=l.exports},DWg2:function(e,t,a){"use strict";var r=a("FaPW");a.n(r).a},FaPW:function(e,t,a){},HDHf:function(e,t,a){"use strict";a.d(t,"l",function(){return n}),a.d(t,"h",function(){return o}),a.d(t,"o",function(){return i}),a.d(t,"b",function(){return s}),a.d(t,"j",function(){return c}),a.d(t,"e",function(){return u}),a.d(t,"a",function(){return l}),a.d(t,"i",function(){return d}),a.d(t,"g",function(){return p}),a.d(t,"m",function(){return m}),a.d(t,"q",function(){return f}),a.d(t,"p",function(){return g}),a.d(t,"n",function(){return b}),a.d(t,"c",function(){return h}),a.d(t,"k",function(){return y}),a.d(t,"f",function(){return v}),a.d(t,"d",function(){return x});var r=a("t3Un");function n(e){return Object(r.a)({url:"/dataSource/pageList",method:"get",params:e})}function o(e){return Object(r.a)({url:"/dataSource/"+e.id,method:"delete",data:e})}function i(e){return Object(r.a)({url:"/dataSource/testConnection",method:"post",data:e})}function s(e){return Object(r.a)({url:"/dataSource",method:"post",data:e})}function c(e){return Object(r.a)({url:"/dataSource",method:"put",data:e})}function u(e){return Object(r.a)({url:"/dataSet/detailBysetId/"+e.id,method:"get"})}function l(e){return Object(r.a)({url:"/dataSet",method:"post",data:e})}function d(e){return Object(r.a)({url:"/dataSet",method:"put",data:e})}function p(e){return Object(r.a)({url:"/dataSet/"+e.id,method:"delete",data:e})}function m(e){return Object(r.a)({url:"/dataSource/queryAllDataSource",method:"get",data:e})}function f(e){return Object(r.a)({url:"/dataSetParam/verification",method:"post",data:e})}function g(e){return Object(r.a)({url:"/dataSet/testTransform",method:"post",data:e})}function b(e){return Object(r.a)({url:"/report/pageList",method:"get",params:e})}function h(e){return Object(r.a)({url:"/report",method:"post",data:e})}function y(e){return Object(r.a)({url:"/report",method:"put",data:e})}function v(e){return Object(r.a)({url:"/report/delReport",method:"delete",data:e})}function x(e){return Object(r.a)({url:"/dataSet/pageList?page="+e.page+"&size="+e.size+"&sort="+e.sort+"&order="+e.order+"&pageNumber="+e.pageNumber+"&pageSize="+e.pageSize,method:"GET",data:e})}},VRRa:function(e,t,a){"use strict";var r=a("rheQ");a.n(r).a},oQ5X:function(e,t,a){"use strict";a.r(t);var r=a("gDS+"),n=a.n(r),o=a("14Xm"),i=a.n(o),s=a("D3Ub"),c=a.n(s),u=a("HDHf"),l=a("sm2R"),d={name:"Support",components:{Dictionary:a("CJ5O").a},data:function(){return{dictionaryOptions:[],selectedList:[],clickType:"",formData:{},list:null,totalCount:0,totalPage:0,listLoading:!0,dialogFormVisible:!1,basicDialog:!1,params:{sourceName:"",sourceCode:"",sourceType:"",pageNumber:1,pageSize:10,order:"DESC",sort:"update_time"},dialogForm:{sourceName:"",sourceCode:"",sourceType:"",sourceDesc:"",sourceConfig:""},dataLink:[],rules:{sourceType:[{required:!0,message:"数据集名称必选",trigger:"change"}],sourceCode:[{required:!0,message:"数据集编码必填",trigger:"blur"}],sourceName:[{required:!0,message:"数据源名称必选",trigger:"blur"}]},value:"",updataDisabled:!1,testReplyCode:null}},watch:{},beforeCreate:function(){},mounted:function(){},created:function(){this.getSystem(),this.queryByPage()},methods:{search:function(){this.params.pageNumber=1,this.queryByPage()},reset:function(e){this.params.sourceName="",this.params.sourceCode="",this.params.pageNumber=1,this.params.sourceType="",this.queryByPage()},queryByPage:function(){var e=this;return c()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.l)(e.params);case 2:if("200"==(a=t.sent).code){t.next=5;break}return t.abrupt("return");case 5:e.listLoading=!0,e.list=a.data.records,e.list.forEach(function(e){e.sourceNameCode=e.sourceName+"["+e.sourceCode+"]"}),e.totalCount=a.data.total,e.totalPage=a.data.pages,e.listLoading=!1;case 11:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.params.pageSize=e,this.queryByPage()},handleCurrentChange:function(e){this.params.pageNumber=e,this.queryByPage()},closeDialog:function(e){this.basicDialog=!1},showAddLogModel:function(e){if(this.basicDialog=!0,void 0==e)this.updataDisabled=!1,this.getSystem(),this.dialogForm={sourceName:"",sourceCode:"",sourceType:"",sourceDesc:"",sourceConfig:""};else{this.updataDisabled=!0,this.dialogForm=e;var t=this.dialogForm,a=[];this.dictionaryOptions.map(function(e){if(e.id==t.sourceType){a=JSON.parse(e.extend);for(var r=JSON.parse(t.sourceConfig),n=0;n<a.length;n++)a[n].value=r[a[n].label]}}),this.dataLink=a}},getSystem:function(){var e=this;return c()(i.a.mark(function t(){var a,r,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.a)("SOURCE_TYPE");case 2:if(a=t.sent,r=a.code,n=a.data,"200"==r){t.next=7;break}return t.abrupt("return");case 7:e.dictionaryOptions=n,e.dialogForm.sourceType=e.dictionaryOptions[0].text,e.dataLink=JSON.parse(e.dictionaryOptions[0].extend);case 10:case"end":return t.stop()}},t,e)}))()},selectChange:function(e){this.dataLink=[];var t=this.dictionaryOptions.find(function(t){return t.id==e});this.dataLink=JSON.parse(t.extend)},test:function(){var e=this,t={};this.dataLink.forEach(function(e){t[e.label]=e.value}),this.dialogForm.sourceConfig=n()(t),Object(u.o)(this.dialogForm).then(function(t){"200"==t.code?(e.testReplyCode=t.code,e.$message({message:"测试成功！",type:"success"})):e.testReplyCode=null})},delData:function(e){var t=this;return c()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c()(i.a.mark(function a(){var r,n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.$emit("deletelayer"),t.visible=!1,a.next=4,Object(u.h)(e);case 4:if(r=a.sent,n=r.code,r.data,"200"==n){a.next=9;break}return a.abrupt("return");case 9:t.queryByPage(),t.$message({type:"success",message:"删除成功!"});case 11:case"end":return a.stop()}},a,t)}))).catch(function(){t.$message({type:"info",message:"已取消删除"})});case 1:case"end":return a.stop()}},a,t)}))()},UserConfirm:function(e){var t=this;return c()(i.a.mark(function a(){var r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r={},t.dataLink.forEach(function(e){r[e.label]=e.value}),t.dialogForm.sourceConfig=n()(r),t.$refs[e].validate(function(){var e=c()(i.a.mark(function e(a,r){var n,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=24;break}if("200"==t.testReplyCode){e.next=4;break}return t.$message.error("测试结果为成功后方可保存！"),e.abrupt("return");case 4:if(void 0!=t.dialogForm.id){e.next=14;break}return e.next=7,Object(u.b)(t.dialogForm);case 7:if(n=e.sent,"200"==n.code){e.next=11;break}return e.abrupt("return");case 11:t.queryByPage(),e.next=21;break;case 14:return e.next=16,Object(u.j)(t.dialogForm);case 16:if(o=e.sent,"200"==o.code){e.next=20;break}return e.abrupt("return");case 20:t.queryByPage();case 21:t.closeDialog(!1),e.next=25;break;case 24:return e.abrupt("return");case 25:case"end":return e.stop()}},e,t)}));return function(t,a){return e.apply(this,arguments)}}());case 4:case"end":return a.stop()}},a,t)}))()}}},p=(a("VRRa"),a("KHd+")),m=Object(p.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"permission",rawName:"v-permission",value:"datasourceManage:query",expression:"'datasourceManage:query'"}],ref:"form",attrs:{model:e.params,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:20,md:12,lg:6,xl:4}},[a("el-form-item",{attrs:{label:"数据源名称"}},[a("el-input",{staticClass:"filter-item",attrs:{size:"mini",clearable:"",placeholder:"数据源名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.crud.toQuery(t)}},model:{value:e.params.sourceName,callback:function(t){e.$set(e.params,"sourceName","string"==typeof t?t.trim():t)},expression:"params.sourceName"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:20,md:12,lg:6,xl:4}},[a("el-form-item",{attrs:{label:"数据源编码"}},[a("el-input",{staticClass:"filter-item",attrs:{size:"mini",clearable:"",placeholder:"数据源Code"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.crud.toQuery(t)}},model:{value:e.params.sourceCode,callback:function(t){e.$set(e.params,"sourceCode","string"==typeof t?t.trim():t)},expression:"params.sourceCode"}})],1)],1),e._v(" "),a("el-col",{staticClass:"query",attrs:{xs:24,sm:20,md:12,lg:6,xl:4}},[a("el-form-item",{attrs:{label:"数据源类型",size:"mini"}},[a("Dictionary",{attrs:{"updata-dict":e.params.sourceType,"dict-key":"SOURCE_TYPE"},model:{value:e.params.sourceType,callback:function(t){e.$set(e.params,"sourceType",t)},expression:"params.sourceType"}})],1)],1),e._v(" "),a("el-col",{staticClass:"query",attrs:{xs:24,sm:20,md:4,lg:4,xl:4}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.search("form")}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.reset("form")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"datasourceManage:insert",expression:"'datasourceManage:insert'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.showAddLogModel()}}},[e._v("新增")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"mt10",staticStyle:{width:"100%"},attrs:{border:"",data:e.list,"element-loading-text":"Loading"}},[a("el-table-column",{attrs:{align:"center",label:"序号",type:"index","min-width":"60px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceType",label:"数据源类型","min-width":"140px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceNameCode",label:"数据源名称[编码]","min-width":"250px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceDesc",label:"数据源描述","min-width":"250px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createBy",label:"创建人","min-width":"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"150px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateBy",label:"修改人","min-width":"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间","min-width":"150px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"datasourceManage:update",expression:"'datasourceManage:update'"}],attrs:{type:"text"},on:{click:function(a){return e.showAddLogModel(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"datasourceManage:delete",expression:"'datasourceManage:delete'"}],attrs:{slot:"reference",type:"text"},on:{click:function(a){return e.delData(t.row)}},slot:"reference"},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{total:e.totalCount,"page-sizes":[10,20,50,100],"page-size":e.params.pageSize,"current-page":e.params.pageNumber,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"项目基础配置",width:"50%","close-on-click-modal":!1,center:"",visible:e.basicDialog},on:{"update:visible":function(t){e.basicDialog=t},close:e.closeDialog}},[a("el-form",{ref:"userForm",attrs:{model:e.dialogForm,rules:e.rules,size:"small","label-width":"100px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:20,md:6,lg:6,xl:6}},[a("el-form-item",{attrs:{label:"数据源类型",prop:"sourceType"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.selectChange},model:{value:e.dialogForm.sourceType,callback:function(t){e.$set(e.dialogForm,"sourceType","string"==typeof t?t.trim():t)},expression:"dialogForm.sourceType"}},e._l(e.dictionaryOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:20,md:7,lg:7,xl:7}},[a("el-form-item",{attrs:{label:"数据源编码",prop:"sourceCode"}},[a("el-input",{attrs:{disabled:e.updataDisabled},model:{value:e.dialogForm.sourceCode,callback:function(t){e.$set(e.dialogForm,"sourceCode","string"==typeof t?t.trim():t)},expression:"dialogForm.sourceCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:20,md:7,lg:7,xl:7}},[a("el-form-item",{attrs:{label:"数据源名称",prop:"sourceName"}},[a("el-input",{model:{value:e.dialogForm.sourceName,callback:function(t){e.$set(e.dialogForm,"sourceName","string"==typeof t?t.trim():t)},expression:"dialogForm.sourceName"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{label:"数据源描述"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.dialogForm.sourceDesc,callback:function(t){e.$set(e.dialogForm,"sourceDesc","string"==typeof t?t.trim():t)},expression:"dialogForm.sourceDesc"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},e._l(e.dataLink,function(t,r){return a("el-col",{key:r,attrs:{xs:24,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{label:t.labelValue}},[a("el-input",{model:{value:t.value,callback:function(a){e.$set(t,"value","string"==typeof a?a.trim():a)},expression:"data.value"}})],1)],1)}),1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:e.test}},[e._v("测试")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.UserConfirm("userForm")}}},[e._v("确定")])],1)],1)],1)},[],!1,null,"6c2df3a5",null);m.options.__file="index.vue";t.default=m.exports},rheQ:function(e,t,a){}}]);